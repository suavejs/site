{"title":"CRUD","files":[{"name":"App.svelte","source":"<!-- https://eugenkiss.github.io/7guis/tasks#crud -->\n\n<script>\n\tlet people = [\n\t\t{\n\t\t\tfirst: 'Hans',\n\t\t\tlast: 'Emil'\n\t\t},\n\t\t{\n\t\t\tfirst: 'Max',\n\t\t\tlast: 'Mustermann'\n\t\t},\n\t\t{\n\t\t\tfirst: 'Roman',\n\t\t\tlast: 'Tisch'\n\t\t}\n\t];\n\n\tlet prefix = '';\n\tlet first = '';\n\tlet last = '';\n\tlet i = 0;\n\n\t$: filteredPeople = prefix\n\t\t? people.filter(person => {\n\t\t\tconst name = `${person.last}, ${person.first}`;\n\t\t\treturn name.toLowerCase().startsWith(prefix.toLowerCase());\n\t\t})\n\t\t: people;\n\n\t$: selected = filteredPeople[i];\n\n\t$: reset_inputs(selected);\n\n\tfunction create() {\n\t\tpeople = people.concat({ first, last });\n\t\ti = people.length - 1;\n\t\tfirst = last = '';\n\t}\n\n\tfunction update() {\n\t\tpeople[i] = { first, last };\n\t}\n\n\tfunction remove() {\n\t\t// Remove selected person from the source array (people), not the filtered array\n\t\tconst index = people.indexOf(selected);\n\t\tpeople = [...people.slice(0, index), ...people.slice(index + 1)];\n\n\t\tfirst = last = '';\n\t\ti = Math.min(i, filteredPeople.length - 2);\n\t}\n\n\tfunction reset_inputs(person) {\n\t\tfirst = person ? person.first : '';\n\t\tlast = person ? person.last : '';\n\t}\n</script>\n\n<style>\n\t* {\n\t\tfont-family: inherit;\n\t\tfont-size: inherit;\n\t}\n\n\tinput {\n\t\tdisplay: block;\n\t\tmargin: 0 0 0.5em 0;\n\t}\n\n\tselect {\n\t\tfloat: left;\n\t\tmargin: 0 1em 1em 0;\n\t\twidth: 14em;\n\t}\n\n\t.buttons {\n\t\tclear: both;\n\t}\n</style>\n\n<input placeholder=\"filter prefix\" bind:value={prefix}>\n\n<select bind:value={i} size={5}>\n\t{#each filteredPeople as person, i}\n\t\t<option value={i}>{person.last}, {person.first}</option>\n\t{/each}\n</select>\n\n<label><input bind:value={first} placeholder=\"first\"></label>\n<label><input bind:value={last} placeholder=\"last\"></label>\n\n<div class='buttons'>\n\t<button on:click={create} disabled=\"{!first || !last}\">create</button>\n\t<button on:click={update} disabled=\"{!first || !last || !selected}\">update</button>\n\t<button on:click={remove} disabled=\"{!selected}\">delete</button>\n</div>\n"}]}