{"title":"Media elements","files":[{"name":"App.svelte","source":"<script>\n\t// These values are bound to properties of the video\n\tlet time = 0;\n\tlet duration;\n\tlet paused = true;\n\n\tlet showControls = true;\n\tlet showControlsTimeout;\n\n\tfunction handleMousemove(e) {\n\t\t// Make the controls visible, but fade out after\n\t\t// 2.5 seconds of inactivity\n\t\tclearTimeout(showControlsTimeout);\n\t\tshowControlsTimeout = setTimeout(() => showControls = false, 2500);\n\t\tshowControls = true;\n\n\t\tif (e.which !== 1) return; // mouse not down\n\t\tif (!duration) return; // video not loaded yet\n\n\t\tconst { left, right } = this.getBoundingClientRect();\n\t\ttime = duration * (e.clientX - left) / (right - left);\n\t}\n\n\tfunction handleMousedown(e) {\n\t\t// we can't rely on the built-in click event, because it fires\n\t\t// after a drag â€” we have to listen for clicks ourselves\n\n\t\tfunction handleMouseup() {\n\t\t\tif (paused) e.target.play();\n\t\t\telse e.target.pause();\n\t\t\tcancel();\n\t\t}\n\n\t\tfunction cancel() {\n\t\t\te.target.removeEventListener('mouseup', handleMouseup);\n\t\t}\n\n\t\te.target.addEventListener('mouseup', handleMouseup);\n\n\t\tsetTimeout(cancel, 200);\n\t}\n\n\tfunction format(seconds) {\n\t\tif (isNaN(seconds)) return '...';\n\n\t\tconst minutes = Math.floor(seconds / 60);\n\t\tseconds = Math.floor(seconds % 60);\n\t\tif (seconds < 10) seconds = '0' + seconds;\n\n\t\treturn `${minutes}:${seconds}`;\n\t}\n</script>\n\n<style>\n\tdiv {\n\t\tposition: relative;\n\t}\n\n\t.controls {\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\twidth: 100%;\n\t\ttransition: opacity 1s;\n\t}\n\n\t.info {\n\t\tdisplay: flex;\n\t\twidth: 100%;\n\t\tjustify-content: space-between;\n\t}\n\n\tspan {\n\t\tpadding: 0.2em 0.5em;\n\t\tcolor: white;\n\t\ttext-shadow: 0 0 8px black;\n\t\tfont-size: 1.4em;\n\t\topacity: 0.7;\n\t}\n\n\t.time {\n\t\twidth: 3em;\n\t}\n\n\t.time:last-child { text-align: right }\n\n\tprogress {\n\t\tdisplay: block;\n\t\twidth: 100%;\n\t\theight: 10px;\n\t\t-webkit-appearance: none;\n\t\tappearance: none;\n\t}\n\n\tprogress::-webkit-progress-bar {\n\t\tbackground-color: rgba(0,0,0,0.2);\n\t}\n\n\tprogress::-webkit-progress-value {\n\t\tbackground-color: rgba(255,255,255,0.6);\n\t}\n\n\tvideo {\n\t\twidth: 100%;\n\t}\n</style>\n\n<h1>Caminandes: Llamigos</h1>\n<p>From <a href=\"https://cloud.blender.org/open-projects\">Blender Open Projects</a>. CC-BY</p>\n\n<div>\n\t<video\n\t\tposter=\"http://svelte-assets.surge.sh/caminandes-llamigos.jpg\"\n\t\tsrc=\"http://svelte-assets.surge.sh/caminandes-llamigos.mp4\"\n\t\ton:mousemove={handleMousemove}\n\t\ton:mousedown={handleMousedown}\n\t\tbind:currentTime={time}\n\t\tbind:duration\n\t\tbind:paused\n\t></video>\n\n\t<div class=\"controls\" style=\"opacity: {duration && showControls ? 1 : 0}\">\n\t\t<progress value=\"{(time / duration) || 0}\"/>\n\n\t\t<div class=\"info\">\n\t\t\t<span class=\"time\">{format(time)}</span>\n\t\t\t<span>click anywhere to {paused ? 'play' : 'pause'} / drag to seek</span>\n\t\t\t<span class=\"time\">{format(duration)}</span>\n\t\t</div>\n\t</div>\n</div>"}]}