{"title":"Timer","files":[{"name":"App.svelte","source":"<!-- https://eugenkiss.github.io/7guis/tasks#timer -->\n\n<script>\n\timport { onDestroy } from 'svelte';\n\n\tlet elapsed = 0;\n\tlet duration = 5000;\n\n\tlet last_time = window.performance.now();\n\tlet frame;\n\n\t(function update() {\n\t\tframe = requestAnimationFrame(update);\n\n\t\tconst time = window.performance.now();\n\t\telapsed += Math.min(\n\t\t\ttime - last_time,\n\t\t\tduration - elapsed\n\t\t);\n\n\t\tlast_time = time;\n\t}());\n\n\tonDestroy(() => {\n\t\tcancelAnimationFrame(frame);\n\t});\n</script>\n\n<label>\n\telapsed time:\n\t<progress value=\"{elapsed / duration}\"></progress>\n</label>\n\n<div>{(elapsed / 1000).toFixed(1)}s</div>\n\n<label>\n\tduration:\n\t<input type=\"range\" bind:value={duration} min=\"1\" max=\"20000\">\n</label>\n\n<button on:click=\"{() => elapsed = 0}\">reset</button>"}]}