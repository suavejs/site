{"title":"Derived stores","files":[{"name":"App.svelte","source":"<script>\n\timport { time, elapsed } from './stores.js';\n\n\tconst formatter = new Intl.DateTimeFormat('en', {\n\t\thour12: true,\n\t\thour: 'numeric',\n\t\tminute: '2-digit',\n\t\tsecond: '2-digit'\n\t});\n</script>\n\n<h1>The time is {formatter.format($time)}</h1>\n\n<p>\n\tThis page has been open for\n\t{$elapsed} {$elapsed === 1 ? 'second' : 'seconds'}\n</p>"},{"name":"stores.js","source":"import { readable, derived } from 'svelte/store';\n\nexport const time = readable(new Date(), function start(set) {\n\tconst interval = setInterval(() => {\n\t\tset(new Date());\n\t}, 1000);\n\n\treturn function stop() {\n\t\tclearInterval(interval);\n\t};\n});\n\nconst start = new Date();\n\nexport const elapsed = derived(\n\ttime,\n\t$time => Math.round(($time - start) / 1000)\n);"}]}