{"title":"Hacker News","files":[{"name":"App.svelte","source":"<script>\n\timport { onMount } from 'svelte';\n\timport List from './List.svelte';\n\timport Item from './Item.svelte';\n\n\tlet item;\n\tlet page;\n\n\tasync function hashchange() {\n\t\t// the poor man's router!\n\t\tconst path = window.location.hash.slice(1);\n\n\t\tif (path.startsWith('/item')) {\n\t\t\tconst id = path.slice(6);\n\t\t\titem = await fetch(`https://node-hnapi.herokuapp.com/item/${id}`).then(r => r.json());\n\n\t\t\twindow.scrollTo(0,0);\n\t\t} else if (path.startsWith('/top')) {\n\t\t\tpage = +path.slice(5);\n\t\t\titem = null;\n\t\t} else {\n\t\t\twindow.location.hash = '/top/1';\n\t\t}\n\t}\n\n\tonMount(hashchange);\n</script>\n\n<style>\n\tmain {\n\t\tposition: relative;\n\t\tmax-width: 800px;\n\t\tmargin: 0 auto;\n\t\tmin-height: 101vh;\n\t\tpadding: 1em;\n\t}\n\n\tmain :global(.meta) {\n\t\tcolor: #999;\n\t\tfont-size: 12px;\n\t\tmargin: 0 0 1em 0;\n\t}\n\n\tmain :global(a) {\n\t\tcolor: rgb(0,0,150);\n\t}\n</style>\n\n<svelte:window on:hashchange={hashchange}/>\n\n<main>\n\t{#if item}\n\t\t<Item {item} returnTo=\"#/top/{page}\"/>\n\t{:else if page}\n\t\t<List {page}/>\n\t{/if}\n</main>"},{"name":"Comment.svelte","source":"<script>\n\texport let comment;\n</script>\n\n<style>\n\tarticle {\n\t\tborder-top: 1px solid #eee;\n\t\tmargin: 1em 0 0 0;\n\t\tpadding: 1em 0 0 0;\n\t\tfont-size: 14px;\n\t}\n\n\t.meta {\n\t\tcolor: #999;\n\t}\n\n\t.replies {\n\t\tpadding: 0 0 0 1em;\n\t}\n</style>\n\n<article>\n\t<p class=\"meta\">{comment.user} {comment.time_ago}</p>\n\n\t{@html comment.content}\n\n\t<div class=\"replies\">\n\t\t{#each comment.comments as child}\n\t\t\t<svelte:self comment={child}/>\n\t\t{/each}\n\t</div>\n</article>"},{"name":"Item.svelte","source":"<script>\n\timport Comment from \"./Comment.svelte\";\n\n\texport let item;\n\texport let returnTo;\n</script>\n\n<style>\n\tarticle {\n\t\tmargin: 0 0 1em 0;\n\t}\n\n\ta {\n\t\tdisplay: block;\n\t\tmargin: 0 0 1em 0;\n\t}\n\n\th1 {\n\t\tfont-size: 1.4em;\n\t\tmargin: 0;\n\t}\n</style>\n\n<a href={returnTo}>&laquo; back</a>\n\n<article>\n\t<a href=\"{item.url}\">\n\t\t<h1>{item.title}</h1>\n\t\t<small>{item.domain}</small>\n\t</a>\n\n\t<p class=\"meta\">submitted by {item.user} {item.time_ago}\n</article>\n\n<div class=\"comments\">\n\t{#each item.comments as comment}\n\t\t<Comment {comment}/>\n\t{/each}\n</div>"},{"name":"List.svelte","source":"<script>\n\timport { beforeUpdate } from \"svelte\";\n\timport Summary from \"./Summary.svelte\";\n\n\tconst PAGE_SIZE = 20;\n\n\texport let page;\n\n\tlet items;\n\tlet offset;\n\n\t$: fetch(`https://node-hnapi.herokuapp.com/news?page=${page}`)\n\t\t.then(r => r.json())\n\t\t.then(data => {\n\t\t\titems = data;\n\t\t\toffset = PAGE_SIZE * (page - 1);\n\t\t\twindow.scrollTo(0, 0);\n\t\t});\n</script>\n\n<style>\n\ta {\n\t\tpadding: 2em;\n\t\tdisplay: block;\n\t}\n\n\t.loading {\n\t\topacity: 0;\n\t\tanimation: 0.4s 0.8s forwards fade-in;\n\t}\n\n\t@keyframes fade-in {\n\t\tfrom { opacity: 0; }\n\t\tto { opacity: 1; }\n\t}\n</style>\n\n{#if items}\n\t{#each items as item, i}\n\t\t<Summary {item} {i} {offset}/>\n\t{/each}\n\n\t<a href=\"#/top/{page + 1}\">page {page + 1}</a>\n{:else}\n\t<p class=\"loading\">loading...</p>\n{/if}"},{"name":"Summary.svelte","source":"<script>\n\texport let item;\n\texport let i;\n\texport let offset;\n\n\tfunction comment_text() {\n\t\tconst c = item.comments_count;\n\t\treturn `${c} ${c === 1 ? 'comment' : 'comments'}`;\n\t}\n</script>\n\n<style>\n\tarticle {\n\t\tposition: relative;\n\t\tpadding: 0 0 0 2em;\n\t\tborder-bottom: 1px solid #eee;\n\t}\n\n\th2 {\n\t\tfont-size: 1em;\n\t\tmargin: 0.5em 0;\n\t}\n\n\tspan {\n\t\tposition: absolute;\n\t\tleft: 0;\n\t}\n\n\ta {\n\t\tcolor: #333;\n\t}\n</style>\n\n<article>\n\t<span>{i + offset + 1}</span>\n\t<h2><a target=\"_blank\" href={item.url}>{item.title}</a></h2>\n\t<p class=\"meta\"><a href=\"#/item/{item.id}\">{comment_text()}</a> by {item.user} {item.time_ago}</p>\n</article>"}]}