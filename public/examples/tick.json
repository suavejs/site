{"title":"tick","files":[{"name":"App.svelte","source":"<script>\n\timport { tick } from 'svelte';\n\n\tlet text = `Select some text and hit the tab key to toggle uppercase`;\n\n\tasync function handleKeydown(event) {\n\t\tif (event.which !== 9) return;\n\n\t\tevent.preventDefault();\n\n\t\tconst { selectionStart, selectionEnd, value } = this;\n\t\tconst selection = value.slice(selectionStart, selectionEnd);\n\n\t\tconst replacement = /[a-z]/.test(selection)\n\t\t\t? selection.toUpperCase()\n\t\t\t: selection.toLowerCase();\n\n\t\ttext = (\n\t\t\tvalue.slice(0, selectionStart) +\n\t\t\treplacement +\n\t\t\tvalue.slice(selectionEnd)\n\t\t);\n\n\t\tawait tick();\n\t\tthis.selectionStart = selectionStart;\n\t\tthis.selectionEnd = selectionEnd;\n\t}\n</script>\n\n<style>\n\ttextarea {\n\t\twidth: 100%;\n\t\theight: 200px;\n\t}\n</style>\n\n<textarea value={text} on:keydown={handleKeydown}></textarea>"}]}