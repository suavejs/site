{"title":"Area chart","files":[{"name":"App.svelte","source":"<script>\n\timport { scaleLinear } from 'd3-scale';\n\timport points from './data.js';\n\n\tconst yTicks = [0, 2, 4, 6, 8];\n\tconst xTicks = [1980, 1990, 2000, 2010];\n\tconst padding = { top: 20, right: 15, bottom: 20, left: 25 };\n\n\tlet width = 500;\n\tlet height = 200;\n\n\t$: xScale = scaleLinear()\n\t\t.domain([minX, maxX])\n\t\t.range([padding.left, width - padding.right]);\n\n\t$: yScale = scaleLinear()\n\t\t.domain([Math.min.apply(null, yTicks), Math.max.apply(null, yTicks)])\n\t\t.range([height - padding.bottom, padding.top]);\n\n\t$: minX = points[0].x;\n\t$: maxX = points[points.length - 1].x;\n\t$: path = `M${points.map(p => `${xScale(p.x)},${yScale(p.y)}`).join('L')}`;\n\t$: area = `${path}L${xScale(maxX)},${yScale(0)}L${xScale(minX)},${yScale(0)}Z`;\n\n\tfunction formatMobile (tick) {\n\t\treturn \"'\" + tick % 100;\n\t}\n</script>\n\n<h2>Arctic sea ice minimum</h2>\n\n<div class=\"chart\" bind:clientWidth={width} bind:clientHeight={height}>\n\t<svg>\n\t\t<!-- y axis -->\n\t\t<g class=\"axis y-axis\" transform=\"translate(0, {padding.top})\">\n\t\t\t{#each yTicks as tick}\n\t\t\t\t<g class=\"tick tick-{tick}\" transform=\"translate(0, {yScale(tick) - padding.bottom})\">\n\t\t\t\t\t<line x2=\"100%\"></line>\n\t\t\t\t\t<text y=\"-4\">{tick} {tick === 8 ? ' million sq km' : ''}</text>\n\t\t\t\t</g>\n\t\t\t{/each}\n\t\t</g>\n\n\t\t<!-- x axis -->\n\t\t<g class=\"axis x-axis\">\n\t\t\t{#each xTicks as tick}\n\t\t\t\t<g class=\"tick tick-{ tick }\" transform=\"translate({xScale(tick)},{height})\">\n\t\t\t\t\t<line y1=\"-{height}\" y2=\"-{padding.bottom}\" x1=\"0\" x2=\"0\"></line>\n\t\t\t\t\t<text y=\"-2\">{width > 380 ? tick : formatMobile(tick)}</text>\n\t\t\t\t</g>\n\t\t\t{/each}\n\t\t</g>\n\n\t\t<!-- data -->\n\t\t<path class=\"path-area\" d={area}></path>\n\t\t<path class=\"path-line\" d={path}></path>\n\t</svg>\n</div>\n\n<p>Average September extent. Source: <a href='https://climate.nasa.gov/vital-signs/arctic-sea-ice/'>NSIDC/NASA</a></p>\n\n<style>\n\t.chart, h2, p {\n\t\twidth: 100%;\n\t\tmax-width: 500px;\n\t\tmargin-left: auto;\n\t\tmargin-right: auto;\n\t}\n\n\tsvg {\n\t\tposition: relative;\n\t\twidth: 100%;\n\t\theight: 200px;\n\t\toverflow: visible;\n\t}\n\n\t.tick {\n\t\tfont-size: .725em;\n\t\tfont-weight: 200;\n\t}\n\n\t.tick line {\n\t\tstroke: #aaa;\n\t\tstroke-dasharray: 2;\n\t}\n\n\t.tick text {\n\t\tfill: #666;\n\t\ttext-anchor: start;\n\t}\n\n\t.tick.tick-0 line {\n\t\tstroke-dasharray: 0;\n\t}\n\n\t.x-axis .tick text {\n\t\ttext-anchor: middle;\n\t}\n\n\t.path-line {\n\t\tfill: none;\n\t\tstroke: rgb(0,100,100);\n\t\tstroke-linejoin: round;\n\t\tstroke-linecap: round;\n\t\tstroke-width: 2;\n\t}\n\n\t.path-area {\n\t\tfill: rgba(0,100,100,0.2);\n\t}\n</style>\n"},{"name":"data.js","source":"export default [\n\t{ x: 1979, y: 7.19 },\n\t{ x: 1980, y: 7.83 },\n\t{ x: 1981, y: 7.24 },\n\t{ x: 1982, y: 7.44 },\n\t{ x: 1983, y: 7.51 },\n\t{ x: 1984, y: 7.10 },\n\t{ x: 1985, y: 6.91 },\n\t{ x: 1986, y: 7.53 },\n\t{ x: 1987, y: 7.47 },\n\t{ x: 1988, y: 7.48 },\n\t{ x: 1989, y: 7.03 },\n\t{ x: 1990, y: 6.23 },\n\t{ x: 1991, y: 6.54 },\n\t{ x: 1992, y: 7.54 },\n\t{ x: 1993, y: 6.50 },\n\t{ x: 1994, y: 7.18 },\n\t{ x: 1995, y: 6.12 },\n\t{ x: 1996, y: 7.87 },\n\t{ x: 1997, y: 6.73 },\n\t{ x: 1998, y: 6.55 },\n\t{ x: 1999, y: 6.23 },\n\t{ x: 2000, y: 6.31 },\n\t{ x: 2001, y: 6.74 },\n\t{ x: 2002, y: 5.95 },\n\t{ x: 2003, y: 6.13 },\n\t{ x: 2004, y: 6.04 },\n\t{ x: 2005, y: 5.56 },\n\t{ x: 2006, y: 5.91 },\n\t{ x: 2007, y: 4.29 },\n\t{ x: 2008, y: 4.72 },\n\t{ x: 2009, y: 5.38 },\n\t{ x: 2010, y: 4.92 },\n\t{ x: 2011, y: 4.61 },\n\t{ x: 2012, y: 3.62 },\n\t{ x: 2013, y: 5.35 },\n\t{ x: 2014, y: 5.28 },\n\t{ x: 2015, y: 4.63 },\n\t{ x: 2016, y: 4.72 }\n];"}]}